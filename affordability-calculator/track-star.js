"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);var i=a.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(){var s=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,a),this.pageData=e,this.pathName=t,this.pageData.categoryName=this.pageData.categoryName||this.convertPathForLegacyPages(),this.pageData.pageId=this.pageData.routeId||this.pageData.pageName||this.beautifyPath()}return _createClass(a,[{key:"convertPathForLegacyPages",value:function(){return"/"===this.pathName?"Homepage":0===this.pathName.indexOf("/tax-tips")?"Articles":this.isProductsAndPricePage()?"Product and Pricing Pages":0===this.pathName.indexOf("/tax-tools")?"Tools":0===this.pathName.indexOf("/taxfreedom")?"TaxFreedom":0===this.pathName.indexOf("/microsite")?"Microsite Pages":0===this.pathName.indexOf("/lp/")?"Campaign Landing Pages":"Other"}},{key:"isProductsAndPricePage",value:function(){return 0<=this.pathName.indexOf("/personal-taxes")||0<=this.pathName.indexOf("/small-business-taxes")}},{key:"beautifyPath",value:function(){return"/"===this.pathName?"homepage":this.pathName.replace(/[^a-zA-Z0-9 ]/g," ")}}]),a}(),o=function(e){var i={};return e&&(-1===e.indexOf("=")||e.replace(/([^=&]+)=([^&]*)/gi,function(e,t,a){i[t]=a})),i},a=function(e,t){var a=e.srcElement||e.originalTarget||e.target;if("click"===e.type&&function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e&&1<e.detail}(e))return!1;var i=a.matches(t),r=a.closest(t);return!(!i&&!r)&&(!(!a.parentElement||a.closest("[data-template-id='widget']")||a.closest("[data-template-id='plugin']"))&&!(i?a:r).classList.contains("suppress-default-beacon"))},p=function(e){var t,a,i,r,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"handledException",s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"error";if(null!==(t=appVars)&&void 0!==t&&null!==(a=t.segment)&&void 0!==a&&a.clientSideLogging&&null!==(i=window)&&void 0!==i&&null!==(r=i.coreServiceAdapter)&&void 0!==r&&r.logger[s]){var o={fileName:"handlebars/common/cms/js/track-star.js",messageCode:n,logKey:"error"===s||"fatal"===s?"analyticsHandledException":null};window.coreServiceAdapter.logger[s](e,o)}},d=function(e,t){var a=e;e instanceof Error?a=e.message:"string"!=typeof e&&(a=JSON.stringify(e)),p(a)},c=function(e){var t,a;window.coreServiceAdapter&&null!==(t=appVars)&&void 0!==t&&null!==(a=t.segment)&&void 0!==a&&a.clientSideMetricsLogging&&window.coreServiceAdapter.logger.info("analytics performance metrics",_objectSpread({messageCode:"analyticsMetrics"},e))},l=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!!(e&&t.mark instanceof Function)&&(t.mark(e),!0)},u=function(e,t){if(performance&&performance.measure instanceof Function&&performance.getEntriesByName instanceof Function){var a="".concat(e,"2").concat(t);performance.measure(a,e,t);var i=performance.getEntriesByName(a);if(i.length)return(i[0].duration/1e3).toFixed(2)}return""},h=function(){function t(e){_classCallCheck(this,t),this.constants=window.intuit.tracking.ecs.webAnalytics.constants,this.strategy=e,this.logErrorThrottle=0}return _createClass(t,[{key:"firePageBeacon",value:function(){var e=this.strategy.propertiesInstance.properties;e.type="page",window.coreServiceAdapter.analytics.trackEvent(e),l("trackStarPageBeaconExecuted",performance);var t=u("requestStart","trackStarPageBeaconExecuted");c({requestStart2trackstarPageBeaconExecuted:t})}},{key:"trackEvent",value:function(t){var e=this;if(!window.analytics&&0===this.logErrorThrottle)return d("window.analytics is not defined"),this.logErrorThrottle++,void setTimeout(function(){e.logErrorThrottle=0},1e3);if(!(0<this.logErrorThrottle)){var a=this.strategy,i=a.context,r=a.propertiesInstance,n=a.pageData,s=a.ssf_on,o=a.ssf_off;if(i&&r){Object.keys(t).map(function(e){r.addProperty(e,t[e])}),appVars.adobeVisitorApi.ssf&&appVars.adobeVisitorApi.ssf.enabled&&i.setContext("ssf",s);var c=i.getContext(window),l=Object.assign({},i.getContext(window),{ssf:o});switch(t.type){case"page":this.page(n.categoryName,n.pageId,t,c);break;case"identify":this.identify(t.userId,t.traits,l);break;case"track":default:this.track("".concat(t.object,":").concat(t.action),r.properties,l)}r.resetMutableProperties()}else d("Track event occurred with no instance")}}},{key:"setInitConfig",value:function(){var e=this.strategy.appVars.trackStarECSVersion,t=window.intuit.tracking.ecs.webAnalytics.constants;window.intuit.tracking.ecs.webAnalytics.initConfig={org:t.org.CG,purpose:t.purpose.MKTG,scope:t.scope.TURBOTAX,ecs_version:e}}},{key:"init",value:function(){var t=this;l("trackStarInitStart",performance);var e,a,i,r,n=u("requestStart","trackStarInitStart");c({requestStart2trackstarInitStart:n}),this.strategy.pageElement=document.querySelector("[data-com-type='page']"),this.strategy.pageData=(e=document.location.pathname,a=document.querySelector("[data-com-type='page']")||{dataset:{}},i=document.body?document.body.dataset:{},(r=new s(a.dataset,e)).pageData.siteId=r.pageData.siteId||i.siteId,r.pageData),this.strategy.uriSearch=window.location.search?window.location.search.substring(1):"",this.strategy.uriParams=o(this.strategy.uriSearch),this.strategy.handleContext(),this.strategy.handleProperties(),this.strategy.updateAllAccountDomainAndRelativeLoginLinks(),this.strategy.retrieveDecibelSessionID().then(function(e){t.strategy.propertiesInstance.addImmutableProperty("decibel_session_id",e)}).catch(function(e){return p(e,"decibelIdRetrieveException","warn")}),this.firePageBeacon()}},{key:"page",value:function(e,t,a,i){try{var r=_objectSpread(_objectSpread({page_category_parameter:e,page_name_parameter:t},a),{},{options:i});window.intuit.tracking.ecs.webAnalytics.trackPage(r)}catch(e){d(e)}}},{key:"track",value:function(e,t,a){try{var i=_objectSpread(_objectSpread({event:e},t),{},{options:a});window.intuit.tracking.ecs.webAnalytics.track(i)}catch(e){d(e)}}},{key:"identify",value:function(e,t,a){try{var i=_objectSpread(_objectSpread({userId:e},t),a);window.intuit.tracking.ecs.webAnalytics.identify(i)}catch(e){console.error(e),d(e)}}},{key:"fireClickBeacon",value:function(e){this.strategy.setPropertiesForContentEngaged(e),window.coreServiceAdapter.analytics.trackEvent(this.strategy.propertiesInstance.properties)}},{key:"bindClickBeacons",value:function(){var t=this;document.addEventListener("click",function(e){try{a(e,t.strategy.clickSelector)&&t.fireClickBeacon(e)}catch(e){d(e)}},!1)}},{key:"bindChangeBeacons",value:function(){var t=this;document.addEventListener("change",function(e){try{a(e,t.strategy.changeSelector)&&t.fireClickBeacon(e)}catch(e){d(e)}})}},{key:"updateMLData",value:function(e){window.appVars.mlData=_objectSpread({},e),this.strategy.handleProperties()}}]),t}(),g=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"|";return e&&e.dataset&&e.dataset.templateId?"".concat((e.dataset.templateId||"").trim()).concat(t).concat((e.dataset.comVersion||"").trim()).concat(t).concat((e.dataset.autoSel||"").trim()).concat(t).concat((e.dataset.instanceVersion||"").trim()):e&&e.dataset&&e.dataset.comId?e.dataset.comId.trim():null},y=function(e){return e&&e.dataset&&e.dataset.legacySku?e.dataset.legacySku:""},e=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.win=e.win||{},this.siteId=e.siteId||"",this.immutableContext={},this.timezone="",this.integrations={},this.userDefindedContext={},this.exec()}return _createClass(t,[{key:"exec",value:function(){this.setTimezone(),this.setImmutableContext()}},{key:"setIntegration",value:function(e,t){this.integrations[e]=t}},{key:"setContext",value:function(e,t){this.userDefindedContext[e]=t}},{key:"setTimezone",value:function(){this.win.Intl&&this.win.Intl.DateTimeFormat&&(this.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone)}},{key:"setImmutableContext",value:function(){var e={};e.timezone=this.timezone,e.ecs_version="4.0",this.immutableContext=e}},{key:"getContext",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t={};return t.browser_pixel_density=e.devicePixelRatio||"",t.integrations=this.integrations,e.navigator&&(t.locale=e.navigator.language),e.screen&&(t.screen_height=e.screen.height,t.screen_width=e.screen.width),Object.assign(t,this.userDefindedContext,this.immutableContext)}}]),t}(),m=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.ivid=e.ivid,this.originalUrl=e.url||"",this.domain=this.originalUrl.split("?")[0],this.adobeVisitorKeyValuePair=e.adobeVisitorKeyValuePair,this.updatedUrl=e.url||"",this.uriParams={},this.urlRegexForParams=/\?(.+)/,this.encodedUriParamString="",this.exec()}return _createClass(t,[{key:"exec",value:function(){var e=this.originalUrl.split(this.urlRegexForParams)[1];this.uriParams=o(e),this.uriParams.redirect_url&&(this.ivid||this.adobeVisitorKeyValuePair)&&this.addParamsToRedirLink()}},{key:"decodeUriParams",value:function(){var t=this,e=Object.keys(this.uriParams),a={};e.forEach(function(e){a[e]=decodeURIComponent(t.uriParams[e])}),this.uriParams=a}},{key:"encodeUriParams",value:function(){var t=this,a=[];Object.keys(this.uriParams).forEach(function(e){a.push("".concat(e,"=").concat(encodeURIComponent(t.uriParams[e])))}),this.encodedUriParamString=a.join("&")}},{key:"addParamsToRedirLink",value:function(){var e="".concat(this.domain,"?");this.decodeUriParams();var t="".concat(this.uriParams.redirect_url);this.adobeVisitorKeyValuePair&&(t+=this.adobeVisitorKeyValuePair),this.ivid&&(t+="&ivid=".concat(this.ivid)),this.uriParams.redirect_url=t,this.encodeUriParams(),e+=this.encodedUriParamString,this.updatedUrl=e}}]),t}(),t=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.immutableProperties={},this.ivid=e.ivid,this.siteId=e.siteId,this.scopeApplicationVersion=e.scopeApplicationVersion||"",this.scopeArea=e.scopeArea||"",this.subScopeArea=e.subScopeArea||null,this.screen=e.screen,this.aamSegmentIds=e.aamSegmentIds,this.personalizationIds=e.personalizationIds,this.mlModelName=e.mlModelName||null,this.mlModelVersion=e.mlModelVersion||null,this.mlModelResponse=e.mlModelResponse||null,this.properties={},this.initImmutableProperties(),this.setDefaultEventProperties()}return _createClass(t,[{key:"initImmutableProperties",value:function(){this.addImmutableProperty("aam_segment_ids",this.aamSegmentIds),this.addImmutableProperty("event_sender_purpose","mktg"),this.addImmutableProperty("event_sender_name","martech"),this.addImmutableProperty("event_sender_version","1.0.0"),this.addImmutableProperty("ivid",this.ivid),this.addImmutableProperty("ml_model_name",this.mlModelName),this.addImmutableProperty("ml_model_version",this.mlModelVersion),this.addImmutableProperty("ml_model_response",this.mlModelResponse),this.addImmutableProperty("org","cg"),this.addImmutableProperty("personalization_ids",this.personalizationIds),this.addImmutableProperty("platform","web"),this.addImmutableProperty("purpose","mktg"),this.addImmutableProperty("scope",this.siteId),this.addImmutableProperty("scope_application_version",this.scopeApplicationVersion),this.addImmutableProperty("scope_version","".concat(this.siteId,":").concat(this.scopeApplicationVersion)),this.addImmutableProperty("screen",this.screen),this.addImmutableProperty("scope_area",this.scopeArea.toLocaleLowerCase()),this.addImmutableProperty("sub_scope_area",this.subScopeArea),this.addImmutableProperty("page_hierarchy","".concat(this.immutableProperties.org,"|").concat(this.immutableProperties.purpose,"|").concat(this.immutableProperties.scope,"|").concat(this.immutableProperties.scope_area,"|").concat(this.immutableProperties.screen))}},{key:"addImmutableProperty",value:function(e,t){return!this.isExistingImmutableProperty(e)&&(null!=t?(this.immutableProperties[e]=t,this.properties[e]=t,!0):void 0)}},{key:"addProperty",value:function(e,t){return!this.isExistingImmutableProperty(e)&&(null!=t?(this.properties[e]=t,!0):void 0)}},{key:"setDefaultEventProperties",value:function(){this.properties.action="viewed",this.properties.object="content",this.properties.event_class="user_action",this.properties.url_query_param=""}},{key:"isExistingImmutableProperty",value:function(e){return this.immutableProperties.hasOwnProperty(e)}},{key:"resetMutableProperties",value:function(){this.properties=Object.assign({},this.immutableProperties),this.setDefaultEventProperties()}}]),t}(),f=function(){function n(){_classCallCheck(this,n);var e=window,t=e.appVars,a=e.Cookies,i=e.Visitor,r=e.performance;this.appVars=t,this.Cookies=a,this.Visitor=i,this.win=window,this.performance=r,this.IVID=a.get("ivid"),this.super_ivid=a.get("superIvid")||null,this.ivid_b=a.get("ivid_b")||null,this.uriParams={},this.logErrorThrottle=0,this.accountsDomain="accounts.intuit.com",this.relativePathSSO="/sso_login/",this.segmentTimeout=t.segment.timeout||3e3,this.segmentInterval=100,this.scope_application_version="EMS".concat(t.pageview.experienceId?"|CMS":"","~2.0"),this.clickSelector="a, button",this.changeSelector="input[type='checkbox'], input[type='radio'], select",this.clickAndChangeSelectors="".concat(this.clickSelector,", ").concat(this.changeSelector),this.loggingIsEnabled=!(!t.segment||!t.segment.clientSideLogging),this.uriSearch="",this.pageElement=null,this.adobeInstance=null,this.pageData={},this.context,this.propertiesInstance,this.ssf_on=0,this.ssf_off=1,this.segmentAnalytics=window.analytics||{},this.appVars.seasonal=t.seasonal||{},this.appVars.article=t.article||{}}return _createClass(n,[{key:"retrieveDecibelSessionID",value:function(){var e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return new Promise(function(t,a){var i=setInterval(function(){if(r<=0)clearInterval(i),a("Not able to get Decibel session ID because decibelInsight library was not present");else if(window.hasOwnProperty("decibelInsight")&&void 0!==decibelInsight("getSessionId")){var e=decibelInsight("getSessionId");clearInterval(i),t(e)}r--},e.appVars.strategy.decibel.timeout)})}},{key:"handleContext",value:function(){this.context=new e({win:{navigator:window.navigator,Intl:window.Intl,location:window.location},siteId:this.pageData.siteId}),this.context.setContext("ivid",this.IVID),this.super_ivid&&this.context.setContext("super_ivid",this.super_ivid),this.context.setContext("ssf",this.ssf_off)}},{key:"handleImmutableProperties",value:function(){var e=function(){for(var e=document.querySelectorAll("[data-com-id]"),t=e.length,a=[],i=0;i<t;i+=1){var r=g(e[i],":");a.push(r)}return a.length?a.join("|"):null}(),t=document.documentElement||{};this.propertiesInstance.addImmutableProperty("application_locale",this.appVars.locale),this.propertiesInstance.addImmutableProperty("browser_encoding",document.characterSet?document.characterSet.toUpperCase():null),this.propertiesInstance.addImmutableProperty("browser_java_enabled",this.win.navigator.javaEnabled?this.win.navigator.javaEnabled():null),this.propertiesInstance.addImmutableProperty("browser_height",t.clientHeight||this.win.innerHeight),this.propertiesInstance.addImmutableProperty("browser_width",t.clientWidth||this.win.innerWidth),this.propertiesInstance.addImmutableProperty("campaign",this.uriParams.cid?encodeURI(this.uriParams.cid):null),this.propertiesInstance.addImmutableProperty("content_id",this.appVars.article&&this.appVars.article.id?this.appVars.article.id:null),this.propertiesInstance.addImmutableProperty("component_ids",e),this.propertiesInstance.addImmutableProperty("cms_locator",g(this.pageElement)),this.propertiesInstance.addImmutableProperty("experiment_ids",window.Cookies.get(this.appVars.experience.cookieName||"tms")||null),this.propertiesInstance.addImmutableProperty("experiment_ids_experienced",this.appVars.clientProfile.experiment_ids_experienced||null),this.propertiesInstance.addImmutableProperty("is_amp",document.documentElement.hasAttribute("amp")),this.propertiesInstance.addImmutableProperty("is_ffa",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=!1;return("TaxFreedom"===e||t&&0<=t.indexOf("freefile.intuit.com"))&&(a=!0),a}(this.pageData.categoryName,document.location.href||"")),this.propertiesInstance.addImmutableProperty("super_ivid",this.super_ivid),this.propertiesInstance.addImmutableProperty("ivid_b",this.ivid_b),this.propertiesInstance.addImmutableProperty("keyword",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.hasOwnProperty("q")?e.q:""}(this.uriParams)),this.propertiesInstance.addImmutableProperty("page_experience",this.pageData.experienceAnalyticsName||null),this.propertiesInstance.addImmutableProperty("page_language",document.documentElement.lang),this.propertiesInstance.addImmutableProperty("priority_code",this.Cookies.get("priorityCode")||null),this.propertiesInstance.addImmutableProperty("referrer",document.referrer),this.propertiesInstance.addImmutableProperty("screen_color_depth",this.win.screen.colorDepth),this.propertiesInstance.addImmutableProperty("url",this.win.location.href),this.propertiesInstance.addImmutableProperty("url_host_name",this.win.location.hostname),this.propertiesInstance.addImmutableProperty("url_query_param",this.uriSearch),this.propertiesInstance.addImmutableProperty("personalization_workflow",appVars.mlData.modelPersonalizationWorkflow||null),this.propertiesInstance.addImmutableProperty("personalization_reward_action_id",appVars.mlData.modelPersonalizationRewardActionId||null),this.propertiesInstance.addImmutableProperty("personalization_reward_handle",appVars.mlData.modelEventId||null),this.propertiesInstance.addImmutableProperty("personalization_placement",appVars.mlData.modelPersonalizationPlacement||null),this.propertiesInstance.addImmutableProperty("personalization_bandits_model",appVars.mlData.modelName||null)}},{key:"handleProperties",value:function(){var e;this.propertiesInstance=new t({siteId:this.pageData.siteId,scopeApplicationVersion:this.scope_application_version,scopeArea:this.pageData.categoryName,subScopeArea:this.pageData.subCategory,screen:this.pageData.pageId?this.pageData.pageId.trim():null,aamSegmentIds:(e=this.appVars.clientProfile.aam_incoming_segments,e?e.replace(/\|/g,":"):null),personalizationIds:this.appVars.clientProfile.decision_audience||null,mlModelName:[this.appVars.mlData.modelName,this.appVars.mxs.modelName].filter(Boolean).join("|"),mlModelVersion:[this.appVars.mlData.modelVersion,this.appVars.mxs.modelVersion].filter(Boolean).join("|"),mlModelResponse:[this.appVars.mlData.modelResponse,Number(this.appVars.mxs.modelEvaluation)||null].filter(Boolean).join("|")}),this.handleImmutableProperties(),this.propertiesInstance.addProperty("tax_prep_year",this.appVars.seasonal.taxYear?"ty".concat(this.appVars.seasonal.taxYear.substr(-2)):null),this.propertiesInstance.addProperty("event_sender_xref_id",this.appVars.mlData.modelEventId||null),this.win.navigator&&(this.propertiesInstance.addProperty("browser_cookies_enabled",!!this.win.navigator.cookieEnabled),this.propertiesInstance.addProperty("browser_plugins",function(e){if(!e)return"";for(var t=[],a=e.length,i=0;i<a;i+=1){var r=e[i];t.push(r.name)}return t.join("|")}(this.win.navigator.plugins))),this.appVars.article.id&&(this.propertiesInstance.addProperty("topic_id",this.appVars.article.id),this.propertiesInstance.addProperty("topic_name",this.appVars.article.category),this.propertiesInstance.addProperty("recommended_sku",function(){var e=document.querySelectorAll("[data-legacy-sku]"),t=null;if(e.length)return(t=Array.from(e).map(function(e){return y(e)}).filter(Boolean).join("|"))&&t.includes("|")&&(t=t.split("|").filter(function(e,t,a){return t===a.indexOf(e)}).join("|")),t;return""}())),this.propertiesInstance.addProperty("personalization_action",appVars.mlData.modelEventId?"viewed":null),this.propertiesInstance.addProperty("is_page_prefetched",appVars.prefetch.is_page_prefetched)}},{key:"updateAllAccountDomainAndRelativeLoginLinks",value:function(){for(var e=document.querySelectorAll("a[href^='https://".concat(this.accountsDomain,"'], a[href*='").concat(this.relativePathSSO,"']")),t=e.length,a=0;a<t;a+=1){var i=e[a],r=i.getAttribute("href"),n=new m({url:r,ivid:this.IVID,adobeVisitorKeyValuePair:this.adobeInstance?this.adobeInstance.visitorIds:""});i.setAttribute("href",n.updatedUrl)}}},{key:"setPropertiesForContentEngaged",value:function(e){var t,a=e.srcElement||e.explicitOriginalTarget||e.originalTarget||e.target,i=a.matches(this.clickAndChangeSelectors)?a:a.closest(this.clickAndChangeSelectors),r=function(){var e={sku:null,screen_object_state:null},t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split(",");return t[0]&&(e.sku=t[0].trim()),t[1]&&(e.screen_object_state=t[1].trim()),e}(this.Cookies.get("tt_sku_s")),n="",s="",o="",c=null,l="",p="change"===e.type?"selected":"".concat(e.type,"ed"),d=null,u=null,h=r.sku;appVars.article&&appVars.article.id&&(h=y(i.closest("[data-legacy-sku]"))||h),i&&(o=i.getAttribute("data-ui-object")||("A"===i.tagName?"link":i.tagName),t=i.closest("[data-com-id]")),t&&(n=g(t),s=g(t,":"),d=t.parentElement.closest("[data-com-id]")),!o&&t&&(o=t.tagName),d&&(c=g(d),l=g(d,":")),i&&(u=function(e){if(!e)return"";if("SELECT"===e.tagName&&0<=e.selectedIndex&&e.options)return e.options[e.selectedIndex]?e.options[e.selectedIndex].text:"";if("SELECT"===e.tagName)return"";if("checkbox"===e.type||"radio"===e.type)return(e.parentElement.textContent||"").trim();var t=(e.textContent||"").trim();return t||(t=(e.getAttribute("aria-label")||"").trim()),t||""}(i)),this.propertiesInstance.addProperty("object_detail",n),this.propertiesInstance.addProperty("action","engaged"),this.propertiesInstance.addProperty("type","click"),this.propertiesInstance.addProperty("ui_action",p),this.propertiesInstance.addProperty("ui_object",o),this.propertiesInstance.addProperty("ui_object_detail","".concat(p," ").concat(u)),this.propertiesInstance.addProperty("ui_access_point",c),this.propertiesInstance.addProperty("sku",null),this.propertiesInstance.addProperty("recommended_sku",h),this.propertiesInstance.addProperty("screen_object_state",r.screen_object_state),this.propertiesInstance.addProperty("event_sender_xref_id",appVars.mlData.modelEventId||null),this.propertiesInstance.addProperty("personalization_action",p),this.propertiesInstance.addProperty("ml_model_name",appVars.mlData.modelName||null),this.propertiesInstance.addProperty("ml_model_version",appVars.mlData.modelVersion||null),this.propertiesInstance.addProperty("ml_model_response",appVars.mlData.modelResponse||null);var m=this.propertiesInstance.properties;this.propertiesInstance.addProperty("action_detail","".concat(m.action,"|").concat(m.object,"|").concat(s,"|").concat(m.ui_action,"|").concat(m.ui_object,"|").concat(m.ui_object_detail,"|").concat(l))}}]),n}();!function(e){var t,a,i,r,n,s,o,c=e.coreServiceAdapter;if(null!=(i=e)&&null!==(r=i.intuit)&&void 0!==r&&null!==(n=r.tracking)&&void 0!==n&&null!==(s=n.ecs)&&void 0!==s&&null!==(o=s.webAnalytics)&&void 0!==o&&o.constants)try{var l=new CustomEvent("BootstrapWebAnalytics",{bubbles:!0,cancelable:!0});t=new f,a=new h(t),c.analytics.registerListener(a.trackEvent.bind(a)),c.analytics.updateMLData=a.updateMLData.bind(a),a.setInitConfig(),document.dispatchEvent(l),document.addEventListener("DOMContentLoaded",function(){a.init(),a.bindClickBeacons(),a.bindChangeBeacons()})}catch(e){p(e.message)}else p("TrackStar lib is undefined.","handledException","warn")}(window)}();