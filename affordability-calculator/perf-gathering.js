"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,d=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(d.push(r.value),d.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return d}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(o){var t=o.performance||{},i=t.navigation,n=o.appVars||{},d=n.csLogging.csaEnabled||!1,e=o.TTCOM_Scripts||{};e.perfGathering={};var c=t.timing,r=e.splunk,a=(o.coreServiceAdapter||{}).logger||{},s=e.PromiseHandler,u=e.perfBeaconTools,m=n.perfLogging.browserResourcesSamplingPercentage,g=null,l={domInteractiveInMilliseconds:0,domCompleteInMilliseconds:0,perceivedLoadTimeInMicroseconds:0},f=function(e){d?(e.level="info",a.info(e.prettyMessage,e)):r&&r.logMessage(e)},p={divideDurationBy1000AndRoundTwoDecimals:function(e){return(e/1e3).toFixed(2)},getDifferenceBetweenTimestampsInSeconds:function(e,t){var n=t-e;return p.divideDurationBy1000AndRoundTwoDecimals(n)},getKeyValuePairsStringFromObject:function(e){var a=[];return Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];a.push("".concat(n,"=").concat(r))}),a.join("&")},getExperienceName:function(){var e="",t=document.querySelector("[data-com-type='page']");return n.pageview&&n.pageview.contentIdentifier&&(e=n.pageview.contentIdentifier),t&&t.dataset.autoSel&&(e&&(e+="|"),e+=t.dataset.autoSel),e},getRandomNumberUnder100:function(){return Math.floor(100*Math.random())+1},thisDataShouldBeTracked:function(e){e=e||{};var t=Object.assign({samplingPercentage:0,enabled:!1},e);if(!1===t.enabled||0===Number(t.samplingPercentage))return!1;if(100===Number(t.samplingPercentage))return!0;if(o.localStorage){var n=o.localStorage.getItem("includeInPerfSampling");if("true"===n)return!0;if("false"===n)return!1}var r=p.getRandomNumberUnder100()<=t.samplingPercentage;try{o.localStorage.setItem("includeInPerfSampling",r)}catch(e){}return r}},v={filterDataByNameAndFiletype:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location.origin;return e.filter(function(e){return 0===e.name.indexOf(t)&&0<=e.name.indexOf(n.perfLogging.browserResourcesFileTypeFilter)})},gatherRefinedData:function(){var e=t.getEntries("resource");return v.filterDataByNameAndFiletype(e).map(function(e){var t=e.duration,n=e.responseEnd;return{name:e.name,duration:t,responseEnd:n,startTime:e.startTime,transferSize:e.transferSize,nextHopProtocol:e.nextHopProtocol}})},samplingPercentageIsNotaNumber:function(){return m&&isNaN(m)},shouldBeCollected:function(){if(!t.getEntries)return!1;if(!n.perfLogging.browserResourcesEnabled||0===m)return!1;if(v.samplingPercentageIsNotaNumber())throw new Error("appVars.perfLogging.browserResourcesSamplingPercentage = ".concat(m," and is expected to be a number"));return 100===m||p.getRandomNumberUnder100()<=m},handleResourceData:function(){if(v.shouldBeCollected()){var e=v.gatherRefinedData();f({prettyMessage:"performance resource data gathered",errorMessage:JSON.stringify(e),url:"/api/v1/cse/jsError",logKey:"clientSideBrowserResourceData",logValue:p.getExperienceName()})}}},S=function(){var e,t,n,r=function(e){var t=Object.assign({},e);for(var n in e)e.hasOwnProperty(n)&&(e[n]<=0||isNaN(e[n]))&&delete t[n];return t}((e=c,t=l.perceivedLoadTimeInMicroSeconds,n=p.divideDurationBy1000AndRoundTwoDecimals(t),{navigationStart2loadEventEnd:p.getDifferenceBetweenTimestampsInSeconds(e.navigationStart,e.loadEventEnd),navigationStart2connectEnd:p.getDifferenceBetweenTimestampsInSeconds(e.navigationStart,e.connectEnd),requestStart2responseEnd:p.getDifferenceBetweenTimestampsInSeconds(e.requestStart,e.responseEnd),domLoading2domComplete:p.getDifferenceBetweenTimestampsInSeconds(e.domLoading,e.domComplete),domLoading2domContentLoaded:p.getDifferenceBetweenTimestampsInSeconds(e.domLoading,e.domContentLoaded),loadEventStart2loadEventEnd:p.getDifferenceBetweenTimestampsInSeconds(e.loadEventStart,e.loadEventEnd),navigationStart2domInteractive:p.getDifferenceBetweenTimestampsInSeconds(e.navigationStart,e.domInteractive),navigationStart2perceivedLoadTime:n,connectEnd2domContentLoaded:p.getDifferenceBetweenTimestampsInSeconds(e.connectEnd,e.domContentLoadedEventStart),navigationStart2domContentLoaded:p.getDifferenceBetweenTimestampsInSeconds(e.navigationStart,e.domContentLoadedEventStart),navigationStart2domComplete:p.getDifferenceBetweenTimestampsInSeconds(e.navigationStart,e.domComplete),redirectStart2redirectEnd:p.getDifferenceBetweenTimestampsInSeconds(e.redirectStart,e.redirectEnd),fetchStart2domainLookupStart:p.getDifferenceBetweenTimestampsInSeconds(e.fetchStart,e.domainLookupStart),domainLookupStart2domainLookupEnd:p.getDifferenceBetweenTimestampsInSeconds(e.domainLookupStart,e.domainLookupEnd),connectStart2connectEnd:p.getDifferenceBetweenTimestampsInSeconds(e.connectStart,e.connectEnd),requestStart2responseStart:p.getDifferenceBetweenTimestampsInSeconds(e.requestStart,e.responseStart),unloadEventStart2unloadEventEnd:p.getDifferenceBetweenTimestampsInSeconds(e.unloadEventStart,e.unloadEventEnd),domContentLoadedEventStart2domContentLoadedEventEnd:p.getDifferenceBetweenTimestampsInSeconds(e.domContentLoadedEventStart,e.domContentLoadedEventEnd),domLoading2domInteractive:p.getDifferenceBetweenTimestampsInSeconds(e.domLoading,e.domInteractive)}));if(r.navigationType=i.type,r.navigationRedirectCount=i.redirectCount,r.experience=p.getExperienceName(),Object.assign(r,{appCodeName:o.navigator.appCodeName,appName:o.navigator.appName,appVersion:o.navigator.appVersion,concurrentHardware:o.navigator.hardwareConcurrency,oscpu:o.navigator.oscpu,platform:o.navigator.platform,productSub:o.navigator.productSub,userAgent:o.navigator.userAgent,vendor:o.navigator.vendor,vendorSub:o.navigator.vendorSub}),d){var a=r;return a.logKey="clientSidePerformanceData",a.prettyMessage="performance data gathered",a}return{prettyMessage:"performance data gathered",url:"/api/v1/cse/jsError",logKey:"clientSidePerformanceData",logValue:"data&"+p.getKeyValuePairsStringFromObject(r)}},y=function(){f(S())},E=function(){var e="performance|domInteractive";return l.perceivedLoadTimeInMicroSeconds&&(e+="|perceivedLoadTime"),e},I=function(){var e="".concat(l.domInteractiveInMilliseconds);return l.perceivedLoadTimeInMicroSeconds&&(e+="|".concat(l.perceivedLoadTimeInMicroSeconds)),e};u&&c&&(s&&window.Promise?(g=new s,document.addEventListener("DOMContentLoaded",function(){g.registerCriteria(u.getCriteria()),g.evaluateCriteria().then(function(){1<=g.countCriteria()&&(l.perceivedLoadTimeInMicroSeconds=t.now())})}),window.addEventListener("load",function(){p.thisDataShouldBeTracked(n.perfLogging)&&!Object.is(c,{})&&setTimeout(y,1e3),v.handleResourceData()})):document.addEventListener("load",function(){v.handleResourceData()}),e.perfGathering.getBeaconDurationName=E,e.perfGathering.getBeaconDurationValue=I)}(window);